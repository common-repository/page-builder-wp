!function(e){"use strict";wp.customize.controlConstructor.wpc_builder=wp.customize.Control.extend({ready:function(){this.wpComposer()},wpComposer:function(){this.container.on("change",".wpc-post-type",(function(t){var i=e(this);if(e(".wpc-post-type-"+i.val()).removeClass("hidden-post").addClass("selected-post").fadeIn(100).siblings(".wpc-builder-all-post-list").removeClass("selected-post").addClass("hidden-post").fadeOut(50),"none"==i.val())return e(".edit-builder, .wpc-builder-all-post-list").fadeOut(50),!1;"none"!=i.val()&&"none"!=e(".wpc-builder-all-post-list.selected-post").find(".wpc_post_ajax_loader").val()?e(".edit-builder").fadeIn(100):e(".edit-builder").fadeOut(50)})),this.container.on("change",".wpc-builder-all-post-list.selected-post .wpc-field-select-ajax",(function(t){"none"!=e(this).val()?e(".edit-builder").fadeIn(100):e(".edit-builder").fadeOut(50)})),this.container.on("click",".edit-builder",(function(t){var i=e(".wpc-builder-all-post-list.selected-post .wpc-field-select-ajax").find(":selected"),a={postID:i.val(),section:"wpc_sections_control",returnURL:"backToCutomizerPanel",permalink:wpc.tools.base64.decode(i.data("permalink")),postTTL:i.text()};wpc.ui.builder.editorSwitchPage(a,!1)}))}})}(jQuery),function(e,t){"use strict";var i,a=wp.customize;a.wpcCustomizerPreview={init:function(){this.preview.bind("wpc-frontend-request",(function(e){var i=e;switch("object"==typeof i&&(i=e.command),i){case"getStatus":var a=wpc.data.previewer.getData();0!==wpc.ui.frontendEditor.taskAfterReloadData.length&&(a.taskAfterReloadData=wpc.ui.frontendEditor.taskAfterReloadData,wpc.ui.frontendEditor.taskAfterReloadData=[]),wp.customize.previewer.send("wpc-frontend-event-data",a),delete a.status,a.base,a.postID;break;case"exitPreview":wpc.ui.builder.onTour=!1,wpc.helpers.productTour.run("exitPreview");break;case"enableHeaderMenu":wpc.ui.builder.preview.topMenu.enable();break;case"disableHeaderMenu":wpc.ui.builder.preview.topMenu.disable();break;case"EditorIsdisabled":setTimeout((function(){wpc.ui.builder.preview.disable()}),10);break;case"EditorIsEnabled":setTimeout((function(){wpc.ui.builder.preview.enable()}),10);break;case"closeNavigator":wpc.navigator.close();break;case"closeItemPicker":wpc.ui.picker.close();break;case"openFrontItemPicker":wp.customize.previewer.send("wpc-frontend-event",{job:"openItemPicker"});break;case"frontItemPicker":"close"===e.state?t("body").removeClass("wpc_itempicker_active"):setTimeout((function(){t("body").addClass("wpc_itempicker_active")}),300);break;case"setPreviewToNormal":t('.wpc_screen-width[data-device="desktop"]').trigger("click");break;case"refreshMe":wp.customize.previewer.refresh();break;case"updateStateHistories":wpc.data.base.histories.callBack();break;case"frontReady":wpc.ui.builder.pageOnLoading=!1,t(".wpc_preloader").remove()}})),this.preview.bind("wpc-tour-activity",(function(e){switch(e){case"sayThanks":wpc.helpers.productTour.run("showSayThanksFirst");break;case"inside_Item_One_Editor":wpc.helpers.tourSetSteps("panelTour_Step_One");break;case"itemsAwesome":wpc.helpers.tourSetSteps("itemsAwesome");break;case"tourLastStep":wpc.helpers.productTour.run("last_Step");break;case"disableTour":wpc.ui.builder.onTour=!1;break;case"enableTour":wpc.ui.builder.onTour=!0}})),this.preview.bind("wpc-live-editor",(function(e){"save"==e.job&&wpc.data.itemElementUpdate(e),"realTimeTyping"==e.job&&wpc.helpers.liveEditor.receiveTyping(e),"reloadEditor"==e.job&&wpc.helpers.liveEditor.switchEditor(e),"applyCloudPreset"==e.job&&wpc.ui.cloudManager.install(e.presetConfig.inlineEditorData.content,"preset",e.presetConfig)})),this.preview.bind("wpc-columns-resize",(function(e){var t;if(!(t=wpc.ui.colManager.calculate(e.format)))return!1;t.rowID=e.rowID,wpc.ui.colManager.switcher(t)})),this.preview.bind("wpc-preview-func",(function(e){switch(e.cmd){case"save":"order"==e.coreCMD&&wpc.data.base.histories.store(wpc.data.base.maindata),""!=e.data&&null!=e.data||(e.data=wpc.data.base.maindata),wpc.data.update(wpc.data.readyToSave(e.data),e.coreCMD);break;case"create_row":wpc.ui.rowManager.add(!!e.hasOwnProperty("props")&&e.props);break;case"redirect":wpc.tools.generateWpcSessionUrl(e.postID);break;case"edit":wpc.ui.settings.load(e.id);break;case"remove":wpc.ui.tabManager.remove(e.id);break;case"add_item":wpc.ui.itemManager.add(e.data);break;case"set_favorites":wpc.ui.picker.favorites[e.action](e.item);break;case"switchPage":wpc.ui.builder.preview.hide(),t.confirm({title:wpc_localize.js_strings.switch_page_to_edit,acceptTitle:"OK",rejectTitle:"NOT NOW",acceptBtnCol:"confirm-blue",rejectBtnCol:"confirm-red",acceptAction:function(){return wpc.ui.items.onEdit=wpc.ui.settings.global=wpc.ui.settings.isCustomEdit=!1,wpc.ui.frontendEditor.onCustomizer=!1,wpc.ui.settings.done(),wpc.tools.generateWpcSessionUrl(e.postID),!1},rejectAction:function(){return wp.customize.previewer.send("wpc-frontend-event","set_editor_off"),!1}});break;case"getPresetList":var i=wpc.ui.presetManager.get(!(!e.hasOwnProperty("type")||!e.type)&&e.type);wp.customize.previewer.send("wpc-backend-callback",{command:e.cmd,data:i});break;case"showNotify":wpc.ui.notify.show(!(!e.hasOwnProperty("message")||!e.message)&&e.message);break;case"hideNotify":wpc.ui.notify.hide()}})),this.preview.bind("wpc-preview-event",(function(e){if("reset"==e.action&&(wpc.ui.frontendEditor.removeID=!1),"presetOK"==e.action&&(wpc.ui.template.install=!1),"remove"==e.action&&(wpc.ui.frontendEditor.removeID=e.elementID),"disable_enable"==e.action){var i=wpc.data.base.maindata;wpc.data.base.update(e.elementID,"disable",e.status),wpc.ui.frontendEditor.info={id:e.elementID,status:e.status},wpc.data.update(wpc.data.readyToSave(i),"itemDisableUpdate")}function a(){switch("remove"==e.action&&e.elementID===wpc.ui.settings.id&&wpc.ui.settings.done(),wpc.data.info.frontend=!0,e.elementType){case"item":"edit"==e.action&&e.customTab&&(wpc.ui.settings.customTab=e.customTab),"newtab"==e.action?wpc.ui.tabManager.add(e.elementID):"navigator"==e.action?wpc.navigator.action.focusOnList(e.elementID):(wpc.data.cloneToCopy=null,"clone"==e.action&&e.hasOwnProperty("copyData")&&(wpc.data.cloneToCopyData=e.copyData),wpc.ui.itemManager[e.action](e.elementID));break;case"column":"navigator"==e.action?wpc.navigator.action.focusOnList(e.elementID):wpc.ui.colManager[e.action](e.elementID);break;case"row":if("navigator"==e.action&&wpc.navigator.action.focusOnList(e.elementID),"edit"!=e.action&&"clone"!=e.action&&"remove"!=e.action||wpc.ui.rowManager[e.action](e.elementID),"set-column"==e.action){var t;if("template"==e.columnFrom&&(t={cells:e.pickerData.cells,colNum:e.pickerData.colNumber,rowID:e.elementID}),"custom"==e.columnFrom){if(!(t=wpc.ui.colManager.calculate(e.pickerData)))return!1;t.rowID=e.elementID}wpc.ui.colManager.switcher(t)}}}"item"!=e.elementType&&"column"!=e.elementType&&"row"!=e.elementType||"remove"!=e.action?a():t.confirm({title:wpc_localize.js_strings.are_u_sure,acceptTitle:"Yes",rejectTitle:"No",acceptBtnCol:"confirm-red",acceptAction:function(){wp.customize.previewer.send("wpc-frontend-event",{job:"onRemoveItem",el:e.elementID}),a()},rejectAction:function(){return wpc.ui.frontendEditor.removeID=!1,wp.customize.previewer.send("wpc-frontend-event","set_preloader_off"),!1}})})),this.preview.bind("wpc-navigator-event",(function(e){"mouseEvent"===e.cmd&&wpc.navigator.action.event(e)})),this.preview.bind("wpc-hotkeys-event",(function(e){wpc.helpers.hotkeys(e)}))}},i=a.Previewer,a.Previewer=i.extend({initialize:function(e,t){a.wpcCustomizerPreview.preview=this,i.prototype.initialize.call(this,e,t)}}),t((function(){a.wpcCustomizerPreview.init()}))}(wp,jQuery);
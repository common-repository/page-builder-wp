// DOM.event.move
//
// 2.0.0
//
// Stephen Band
//
// Triggers 'movestart', 'move' and 'moveend' events after
// mousemoves following a mousedown cross a distance threshold,
// similar to the native 'dragstart', 'drag' and 'dragend' events.
// Move events are throttled to animation frames. Move event objects
// have the properties:
//
// pageX:
// pageY:     Page coordinates of pointer.
// startX:
// startY:    Page coordinates of pointer at movestart.
// distX:
// distY:     Distance the pointer has moved since movestart.
// deltaX:
// deltaY:    Distance the finger has moved since last event.
// velocityX:
// velocityY: Average velocity over last few events.

!function(t){'use strict';"function"==typeof define&&define.amd?define([],t):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=t:t()}((function(){var t=Object.assign||window.jQuery&&jQuery.extend,e=8,n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){return window.setTimeout((function(){t()}),25)};!function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}();var i={textarea:!0,input:!0,select:!0,button:!0},o="mousemove",a="mouseup dragstart",u="mouseup",c="touchmove",r="touchend",d="touchend",f=/\s+/,m={bubbles:!0,cancelable:!0},s="function"==typeof Symbol?Symbol("events"):{};function v(t){return new CustomEvent(t,m)}function l(t){return t[s]||(t[s]={})}function p(t,e,n,i,o){e=e.split(f);var a=l(t),u=e.length,c,r;function d(t){n(t,i)}for(;u--;)(c=a[r=e[u]]||(a[r]=[])).push([n,d]),t.addEventListener(r,d)}function g(t,e,n,i){e=e.split(f);var o=l(t),a=e.length,u,c,r;if(o)for(;a--;)if(c=o[u=e[a]])for(r=c.length;r--;)c[r][0]===n&&(t.removeEventListener(u,c[r][1]),c.splice(r,1))}function h(e,n,i){var o=v(n);i&&t(o,i),e.dispatchEvent(o)}function X(t){var e=t,i=!1,o=!1;function a(t){i?(e(),n(a),o=!0,i=!1):o=!1}this.kick=function(t){i=!0,o||a()},this.end=function(t){var n=e;t&&(o?(e=i?function(){n(),t()}:t,i=!0):t())}}function Y(){}function y(t){t.preventDefault()}function w(t){return!!i[t.target.tagName.toLowerCase()]}function b(t){return 1===t.which&&!t.ctrlKey&&!t.altKey}function T(t,e){var n,i;if(t.identifiedTouch)return t.identifiedTouch(e);for(n=-1,i=t.length;++n<i;)if(t[n].identifier===e)return t[n]}function E(t,e){var n=T(t.changedTouches,e.identifier);if(n&&(n.pageX!==e.pageX||n.pageY!==e.pageY))return n}function S(t){b(t)&&(w(t)||(p(document,o,k,t),p(document,a,K,t)))}function k(t,e){F(t,e,t,j)}function K(t,e){j()}function j(){g(document,o,k),g(document,a,K)}function C(t){if(!i[t.target.tagName.toLowerCase()]){var e=t.changedTouches[0],n={target:e.target,pageX:e.pageX,pageY:e.pageY,identifier:e.identifier,touchmove:function(t,e){Q(t,e)},touchend:function(t,e){q(t,e)}};p(document,c,n.touchmove,n),p(document,r,n.touchend,n)}}function Q(t,e){var n=E(t,e);n&&F(t,e,n,A)}function q(t,e){var n;T(t.changedTouches,e.identifier)&&A(e)}function A(t){g(document,c,t.touchmove),g(document,r,t.touchend)}function F(t,e,n,i){var o=n.pageX-e.pageX,a=n.pageY-e.pageY;o*o+a*a<64||M(t,e,n,o,a,i)}function M(t,e,n,i,o,a){var u=t.targetTouches,c=t.timeStamp-e.timeStamp,r={altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,startX:e.pageX,startY:e.pageY,distX:i,distY:o,deltaX:i,deltaY:o,pageX:n.pageX,pageY:n.pageY,velocityX:i/c,velocityY:o/c,identifier:e.identifier,targetTouches:u,finger:u?u.length:1,enableMove:function(){this.moveEnabled=!0,this.enableMove=Y,t.preventDefault()}};h(e.target,"movestart",r),a(e)}function x(t,e){var n=e.timer;e.touch=t,e.timeStamp=t.timeStamp,n.kick()}function L(t,e){var n=e.target,i=e.event,o=e.timer;R(),P(n,i,o,(function(){setTimeout((function(){g(n,"click",y)}),0)}))}function R(){g(document,o,x),g(document,u,L)}function D(t,e){var n=e.event,i=e.timer,o=E(t,n);o&&(t.preventDefault(),n.targetTouches=t.targetTouches,e.touch=o,e.timeStamp=t.timeStamp,i.kick())}function N(t,e){var n=e.target,i=e.event,o=e.timer,a;T(t.changedTouches,i.identifier)&&(z(e),P(n,i,o))}function z(t){g(document,c,t.activeTouchmove),g(document,d,t.activeTouchend)}function O(t,e,n){var i=n-t.timeStamp;t.distX=e.pageX-t.startX,t.distY=e.pageY-t.startY,t.deltaX=e.pageX-t.pageX,t.deltaY=e.pageY-t.pageY,t.velocityX=.3*t.velocityX+.7*t.deltaX/i,t.velocityY=.3*t.velocityY+.7*t.deltaY/i,t.pageX=e.pageX,t.pageY=e.pageY}function P(t,e,n,i){n.end((function(){return h(t,"moveend",e),i&&i()}))}function B(t){if(!t.defaultPrevented&&t.moveEnabled){var e={startX:t.startX,startY:t.startY,pageX:t.pageX,pageY:t.pageY,distX:t.distX,distY:t.distY,deltaX:t.deltaX,deltaY:t.deltaY,velocityX:t.velocityX,velocityY:t.velocityY,identifier:t.identifier,targetTouches:t.targetTouches,finger:t.finger},n={target:t.target,event:e,timer:new X(i),touch:void 0,timeStamp:t.timeStamp};void 0===t.identifier?(p(t.target,"click",y),p(document,o,x,n),p(document,u,L,n)):(n.activeTouchmove=function(t,e){D(t,e)},n.activeTouchend=function(t,e){N(t,e)},p(document,c,n.activeTouchmove,n),p(document,d,n.activeTouchend,n))}function i(t){O(e,n.touch,n.timeStamp),h(n.target,"move",e)}}if(p(document,"mousedown",S),p(document,"touchstart",C),p(document,"movestart",B),window.jQuery){var G="startX startY pageX pageY distX distY deltaX deltaY velocityX velocityY".split(" ");jQuery.event.special.movestart={setup:function(){return p(this,"movestart",H),!1},teardown:function(){return g(this,"movestart",H),!1},add:U},jQuery.event.special.move={setup:function(){return p(this,"movestart",I),!1},teardown:function(){return g(this,"movestart",I),!1},add:U},jQuery.event.special.moveend={setup:function(){return p(this,"movestart",J),!1},teardown:function(){return g(this,"movestart",J),!1},add:U}}function H(t){t.enableMove()}function I(t){t.enableMove()}function J(t){t.enableMove()}function U(t){var e=t.handler;t.handler=function(t){for(var n=G.length,i;n--;)t[i=G[n]]=t.originalEvent[i];e.apply(this,arguments)}}}));